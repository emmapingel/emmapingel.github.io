<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Emma Pingel">
<meta name="dcterms.date" content="2025-05-01">

<title>Embodied Emissions – Emma Pingel</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-941d7e14017e1a43777b60853515243b.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Emma Pingel</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./project1.html"> 
<span class="menu-text">CO Streamflow Analysis</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./project2.html" aria-current="page"> 
<span class="menu-text">IA Embodied Emissions</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#renewable-energy-emissions" id="toc-renewable-energy-emissions" class="nav-link active" data-scroll-target="#renewable-energy-emissions">Renewable Energy Emissions</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Embodied Emissions</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Emma Pingel </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">May 1, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p><em>Completed with CSU’s ESS 545: Greenhouse Gas Inventories.</em></p>
<section id="renewable-energy-emissions" class="level3">
<h3 class="anchored" data-anchor-id="renewable-energy-emissions">Renewable Energy Emissions</h3>
<p>While renewable energy is more efficient and less carbon intensive, greenhouse gas emissions are still generated from the production, transportation, and maintenance of these systems. Such contributions are important factors when considering the viability of renewable energy projects like utility-scale wind. Thus, the goal of this inventory is to compare the emissions from electricity generated with wind to more traditional sources such as coal and natural gas in the state of Iowa. Results are then analyzed to inform policymakers interested in diversifying the energy mix with a subsequent mitigation plan to minimize future climate change impacts drafted for the purpose of this assignment. It should be noted that the recommendation did not satisfy the American Carbon Registry’s 3-Prong Test of Additionality and is therefore not plausible.</p>
<hr>
<section id="embodied-emissions-in-wind-electricity" class="level4">
<h4 class="anchored" data-anchor-id="embodied-emissions-in-wind-electricity">Embodied Emissions in Wind Electricity</h4>
<p>Iowa is a prime example of how the global shift towards renewable energy can impact local scales. Its flat topography in the middle of the Great Plains exposes this region to consistent wind patterns that increase in speed as they blow through the open landscape. This creates an opportunity for utility-scale wind turbine investment since productivity rates for electricity are very promising. The state’s energy portfolio has already expanded in this direction as legislation compels the energy industry to improve grid security while maintaining environmental integrity and economic growth. Currently, Iowa’s grid is mostly powered with coal, natural gas, and petroleum sources but the early 2000s saw a significant increase in the deployment of wind.</p>
<p>Embodied emissions arise from this renewable energy source as the manufacturing of turbine parts, distribution of the product to its field site, and ongoing maintenance for long-lasting performance generate indirect emissions. It is important to consider these impacts as most wind turbines are not constructed on site and, despite the handful of manufacturing facilities present in eastern Iowa, will need to be driven to the west side of the state via semi-truck where most wind farms are located. Thus, greenhouse gas emissions from electricity produced with wind sources should be calculated to fairly compare electricity production methods in Iowa.</p>
<p>Estimates of each energy source’s contribution are based on existing literature and previous case studies with a consistent reporting unit of grams of carbon dioxide equivalents (g CO2) as emission factors. The objective of this study is to compare embodied utility-scale wind emissions to the other three electricity production sources in the state of Iowa to determine if this production alternative is the best method for reducing energy emissions, while also exploring how these systems can be effectively implemented.</p>
</section>
<section id="calculating-inventory-emissions" class="level4">
<h4 class="anchored" data-anchor-id="calculating-inventory-emissions">Calculating Inventory Emissions</h4>
<p>Using R, I made a function to estimate annual carbon dioxide emissions (in thousand metric tonnes) from electricity production for application with data sets, if desired. This script was originally developed by me on April 2, 2025 with its last update on May 5, 2025 and is intended to be used with Iowa’s energy portfolio data published in 2024. Emissions factors are based on the 2006 IPCC Guidelines for Approach II with Monte Carlo simulations that are informed by the equation <em>Emissions = Activity * Emissions Factor</em> with additional guidance from my professor, Dr Ogle. Activity data is collected in megawatt hours (MWh) using a top-down data collection method to quantify the total amount of electricity produced per energy source each year. Approach II is outlined in the Guidelines with steps that identify specific categorical uncertainties, randomly select the starting value for iterations, estimate annual emissions, and then store results according to the project’s goals. A 95% confidence interval is assumed for each nonrenewable energy source.</p>
<p>Below is a list of function arguments:</p>
<ul>
<li><p><code>input.filename</code> describes the name of the comma delimited file with input activity data in columns describing emissions from electricity generated via wind, photovoltaic solar, coal, natural gas, and petroleum in the state of Iowa</p></li>
<li><p><code>energy.source</code> reflects the number of electricity production methods included in the inventory; defaults to 1</p></li>
<li><p><code>nyears</code> represents the number of years of data; defaults to 1</p></li>
<li><p><code>iseed</code> is the initial seed value for random draws; defaults to the system’s date</p></li>
<li><p><code>nreps</code> refers to the number of Monte Carlos iterations; defaults to 10,000</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="st">"IowaEmissions"</span> <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">input.filename =</span> <span class="st">"NAME"</span>, <span class="at">energy.source =</span> <span class="dv">1</span>, <span class="at">nyears =</span> <span class="dv">1</span>, <span class="at">iseed =</span> <span class="dv">739415</span>, <span class="at">nreps =</span> <span class="dv">10000</span>) </span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>{ <span class="co"># set seed</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set.seed</span>(iseed)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># load library </span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">library</span>(triangle)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># import data </span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>  electricity.data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="at">file =</span> input.filename, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">sep =</span> <span class="st">","</span>, <span class="at">fill =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># validate input data is numeric </span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(n <span class="cf">in</span> (<span class="dv">1</span><span class="sc">:</span>nyears)) { electricity.data[ ,n<span class="sc">+</span><span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(electricity.data[ ,n<span class="sc">+</span><span class="dv">1</span>]) } </span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># check input data </span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>  <span class="do">## energy sources </span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>  check.energy.source <span class="ot">&lt;-</span> <span class="fu">length</span>(electricity.data[ ,<span class="dv">1</span>]) <span class="sc">==</span> energy.source </span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="sc">!</span>check.energy.source) {<span class="fu">stop</span>(<span class="st">"Warning: The numer of energy sources in the function call </span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="st">                                   does not equal the number in the input file"</span>)} </span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>  <span class="do">## co2 emission factors </span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(efact <span class="cf">in</span> (<span class="dv">1</span><span class="sc">:</span>energy.source)) { check.CO2.ef <span class="ot">&lt;-</span> electricity.data[efact,<span class="dv">2</span>] <span class="sc">&gt;=</span> <span class="dv">0</span> </span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="sc">!</span>check.CO2.ef) {<span class="fu">stop</span>(<span class="st">"Error: CO2 EF must be greater than or equal to 0, check input file."</span>)} </span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>  check.CO2.min <span class="ot">&lt;-</span> electricity.data[efact,<span class="dv">3</span>] <span class="sc">&lt;=</span> electricity.data[efact,<span class="dv">2</span>] <span class="sc">&amp;</span> electricity.data[efact,<span class="dv">3</span>] <span class="sc">&gt;=</span> <span class="dv">0</span> </span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="sc">!</span>check.CO2.min) {<span class="fu">stop</span>(<span class="st">"Error: Minimum CO2 EF must be greater than or equal to 0 and less </span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="st">                             than the EF value, check your input file."</span>)} </span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>  check.CO2.max <span class="ot">&lt;-</span> electricity.data[efact,<span class="dv">4</span>] <span class="sc">&gt;=</span> electricity.data[efact,<span class="dv">2</span>] </span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="sc">!</span>check.CO2.max) {<span class="fu">stop</span>(<span class="st">"Error: Maximum CO2 EF must be greater than or equal to EFvalue, </span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a><span class="st">                             check your input file."</span>)} } </span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>  <span class="do">## electricity production </span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(e <span class="cf">in</span> (<span class="dv">1</span><span class="sc">:</span>nyears)) { <span class="cf">for</span>(mwh <span class="cf">in</span> (<span class="dv">1</span><span class="sc">:</span>energy.source)) { check.production <span class="ot">&lt;-</span> electricity.data[mwh,<span class="dv">5</span><span class="sc">+</span>((e<span class="dv">-1</span>)<span class="sc">*</span><span class="dv">2</span>)] <span class="sc">&gt;=</span> <span class="dv">0</span> </span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="sc">!</span>check.production) {<span class="fu">stop</span>(<span class="st">"Error: Electricity production must be greater than or equal to 0, </span></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a><span class="st">                                check input file."</span>)} </span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>  check.prod.sd <span class="ot">&lt;-</span> electricity.data[mwh,<span class="dv">6</span><span class="sc">+</span>((e<span class="dv">-1</span>)<span class="sc">*</span><span class="dv">2</span>)] <span class="sc">&gt;=</span> <span class="dv">0</span> </span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="sc">!</span>check.prod.sd) {<span class="fu">stop</span>(<span class="st">"Error: Production standard deviations must be greater than or equal to 0, </span></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a><span class="st">                           check input file."</span>)} } } </span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>  <span class="co"># simulate nreps of EFs and production amount </span></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>  <span class="do">## co2 emission factors </span></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>  co2.ef.sim <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">0</span>, <span class="at">nrow =</span> energy.source, <span class="at">ncol =</span> nreps) </span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (co <span class="cf">in</span> (<span class="dv">1</span><span class="sc">:</span>energy.source)) { co2.ef.sim[co, ] <span class="ot">&lt;-</span> <span class="fu">rtriangle</span>(nreps, <span class="at">a =</span> electricity.data[co,<span class="dv">3</span>], <span class="at">b =</span> electricity.data[co,<span class="dv">4</span>], </span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a>                                                                  <span class="at">c =</span> electricity.data[co,<span class="dv">2</span>]) } </span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>  <span class="do">## production amount </span></span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>  prod.amount.sim <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">0</span>, <span class="at">nrow =</span> energy.source <span class="sc">*</span> nyears, <span class="at">ncol =</span> nreps) </span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span>(m <span class="cf">in</span> (<span class="dv">1</span><span class="sc">:</span>nyears)) { </span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>      <span class="cf">for</span>(p <span class="cf">in</span> (<span class="dv">1</span><span class="sc">:</span>energy.source)) { </span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>        prod.amount.sim[p<span class="sc">+</span>(energy.source<span class="sc">*</span>(m<span class="dv">-1</span>)),] <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(nreps, <span class="at">mean =</span> electricity.data[p,<span class="dv">5</span><span class="sc">+</span>((m<span class="dv">-1</span>)<span class="sc">*</span><span class="dv">2</span>)], </span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a>                                                           <span class="at">sd =</span> electricity.data[p,<span class="dv">6</span><span class="sc">+</span>((m<span class="dv">-1</span>)<span class="sc">*</span><span class="dv">2</span>)]) } } </span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a>  <span class="co"># calculate emissions </span></span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a>  <span class="co"># units: emissions in TMT CO2, production in MWh, EF in g CO2/kWh </span></span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a>  <span class="co"># remember 1 MWh = 1000 kWh &amp; 1 kg = 1000 g &amp; 1 TMT = 1000000 kg </span></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a>  <span class="do">## deterministic estimation </span></span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a>  deterministic.co2.eq <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">0</span>, <span class="at">nrow =</span> energy.source, <span class="at">ncol =</span> nyears) </span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (y <span class="cf">in</span> (<span class="dv">1</span><span class="sc">:</span>nyears)) { </span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (d <span class="cf">in</span> (<span class="dv">1</span><span class="sc">:</span>energy.source)) { </span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a>      deterministic.co2.eq[d,y] <span class="ot">&lt;-</span> ((electricity.data[d,<span class="dv">2</span>] <span class="sc">*</span> electricity.data[d,<span class="dv">5</span><span class="sc">+</span>((y<span class="dv">-1</span>)<span class="sc">*</span><span class="dv">2</span>)])<span class="sc">/</span><span class="dv">1000000</span>) } } </span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a>  <span class="do">## probabilistic estimation </span></span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a>  probabilistic.co2.eq <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">0</span>, <span class="at">nrow =</span> energy.source <span class="sc">*</span> nyears, <span class="at">ncol =</span> nreps) </span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (y <span class="cf">in</span> (<span class="dv">1</span><span class="sc">:</span>nyears)) { </span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (p <span class="cf">in</span> (<span class="dv">1</span><span class="sc">:</span>energy.source)) { </span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a>      probabilistic.co2.eq[p<span class="sc">+</span>(energy.source<span class="sc">*</span>(y<span class="dv">-1</span>)), ] <span class="ot">&lt;-</span> ((co2.ef.sim[p, ] <span class="sc">*</span> </span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a>                                                             prod.amount.sim[p<span class="sc">+</span>(energy.source<span class="sc">*</span>(y<span class="dv">-1</span>)),])<span class="sc">/</span><span class="dv">1000000</span>) } } </span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a>  <span class="do">## sum the individiual fuel sources to obtain total CO2 eq. emissions </span></span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a>  probabilistic.CO2.eq.total <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">0</span>, <span class="at">nrow =</span> nyears, <span class="at">ncol =</span> nreps) </span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span>(y <span class="cf">in</span> (<span class="dv">1</span><span class="sc">:</span>nyears)) { </span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a>      probabilistic.CO2.eq.total[y, ] <span class="ot">&lt;-</span> <span class="fu">apply</span>(probabilistic.co2.eq[(<span class="dv">1</span><span class="sc">+</span>((y<span class="dv">-1</span>)<span class="sc">*</span>energy.source))<span class="sc">:</span>(energy.source <span class="sc">+</span> ((y<span class="dv">-1</span>)<span class="sc">*</span>energy.source)),], <span class="at">MAR =</span> <span class="dv">2</span>, <span class="at">FUN =</span> <span class="st">"sum"</span>) } </span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a>  <span class="co"># estimate median and 95% CI </span></span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a>  <span class="do">## create matrix for storing results </span></span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a>  electricity.emissions<span class="fl">.2</span> <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">0</span>, <span class="at">nrow =</span> nyears, <span class="at">ncol =</span> <span class="dv">3</span>) </span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (b <span class="cf">in</span> (<span class="dv">1</span><span class="sc">:</span>nyears)) { </span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a>      electricity.emissions<span class="fl">.2</span>[b,<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">median</span>(probabilistic.CO2.eq.total[b, ]) </span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true" tabindex="-1"></a>      quant <span class="ot">&lt;-</span> <span class="fu">quantile</span>(probabilistic.CO2.eq.total[b, ], <span class="at">probs =</span> <span class="fu">c</span>(<span class="fl">0.025</span>,<span class="fl">0.975</span>)) </span>
<span id="cb1-73"><a href="#cb1-73" aria-hidden="true" tabindex="-1"></a>        electricity.emissions<span class="fl">.2</span>[b,<span class="dv">2</span>] <span class="ot">&lt;-</span> quant[<span class="dv">1</span>] </span>
<span id="cb1-74"><a href="#cb1-74" aria-hidden="true" tabindex="-1"></a>        electricity.emissions<span class="fl">.2</span>[b,<span class="dv">3</span>] <span class="ot">&lt;-</span> quant[<span class="dv">2</span>] </span>
<span id="cb1-75"><a href="#cb1-75" aria-hidden="true" tabindex="-1"></a>      check.emissions<span class="fl">.2</span> <span class="ot">&lt;-</span> deterministic.co2.eq[b] <span class="sc">&gt;=</span> electricity.emissions<span class="fl">.2</span>[b,<span class="dv">2</span>] <span class="sc">&amp;</span> </span>
<span id="cb1-76"><a href="#cb1-76" aria-hidden="true" tabindex="-1"></a>                           deterministic.co2.eq[b] <span class="sc">&lt;=</span> electricity.emissions<span class="fl">.2</span>[b,<span class="dv">3</span>] </span>
<span id="cb1-77"><a href="#cb1-77" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span>(<span class="sc">!</span>check.emissions<span class="fl">.2</span>) {<span class="fu">cat</span>(<span class="st">"Warning: Deterministic solution for year "</span>,b,<span class="st">" is outside of its respective confidence interval."</span>)} }</span>
<span id="cb1-78"><a href="#cb1-78" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-79"><a href="#cb1-79" aria-hidden="true" tabindex="-1"></a>  <span class="co"># return statement </span></span>
<span id="cb1-80"><a href="#cb1-80" aria-hidden="true" tabindex="-1"></a>  <span class="fu">colnames</span>(electricity.emissions<span class="fl">.2</span>) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Median TMT CO2"</span>, <span class="st">"2.5 Percentile"</span>, <span class="st">"97.5 Percentile"</span>) </span>
<span id="cb1-81"><a href="#cb1-81" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(electricity.emissions<span class="fl">.2</span>)</span>
<span id="cb1-82"><a href="#cb1-82" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="mitigation-scenario" class="level4">
<h4 class="anchored" data-anchor-id="mitigation-scenario">Mitigation Scenario</h4>
<p>First, historical emissions are estimated to provide an accurate baseline to compare utility-scale wind embodied emissions. The input file contains electricity production amounts in Iowa sourced from coal, natural gas, oil, and wind energy along with their carbon dioxide emission factors and standard deviations. Activity data is collected on a five-year interval excluding 2020-2023 given the limited data available in this moment.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># historical emissions referencing inventory for baseline</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>historical.emissions <span class="ot">&lt;-</span> <span class="fu">IowaEmissions</span>(<span class="at">input.filename =</span> <span class="st">"data/IowaWind.csv"</span>, </span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">energy.source =</span> <span class="dv">4</span>, <span class="at">nyears =</span> <span class="dv">8</span>, </span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">iseed =</span> <span class="dv">739415</span>, <span class="at">nreps =</span> <span class="dv">10000</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Warning: Deterministic solution for year  2  is outside of its respective confidence interval.Warning: Deterministic solution for year  3  is outside of its respective confidence interval.Warning: Deterministic solution for year  4  is outside of its respective confidence interval.Warning: Deterministic solution for year  5  is outside of its respective confidence interval.Warning: Deterministic solution for year  6  is outside of its respective confidence interval.Warning: Deterministic solution for year  7  is outside of its respective confidence interval.Warning: Deterministic solution for year  8  is outside of its respective confidence interval.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plot emission estimates</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>years <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1990</span>,<span class="dv">1995</span>,<span class="dv">2000</span>,<span class="dv">2005</span>,<span class="dv">2010</span>,<span class="dv">2015</span>,<span class="dv">2020</span>, <span class="dv">2023</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="at">x =</span> years, <span class="at">y =</span> historical.emissions[,<span class="dv">1</span>], <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">"purple4"</span>,</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">1985</span>, <span class="dv">2055</span>), <span class="at">xlab =</span> <span class="st">"Year"</span>,</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">100000</span>), <span class="at">ylab =</span> <span class="st">"GHG Emissions (TMT CO2e)"</span>,</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">"GHG Emissions from Electricity Generation </span><span class="sc">\n</span><span class="st"> in Iowa (TMT CO2e)"</span>)</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="co"># uncertainty</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(<span class="at">x =</span> years, <span class="at">y =</span> historical.emissions[,<span class="dv">2</span>], <span class="at">lty =</span> <span class="dv">2</span>, <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">"purple4"</span>)</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(<span class="at">x =</span> years, <span class="at">y =</span> historical.emissions[,<span class="dv">3</span>], <span class="at">lty =</span> <span class="dv">2</span>, <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">"purple4"</span>)</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="co"># legend</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(<span class="st">"topright"</span>, <span class="st">"Historical"</span>,</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">lwd =</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">2</span>), <span class="at">lty =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>),</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">col =</span> <span class="st">"purple4"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="project2_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Plot BAU.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># projected emissions for BAU using simple linear regression</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>projected.emissions <span class="ot">&lt;-</span> <span class="fu">IowaEmissions</span>(<span class="at">input.filename =</span> <span class="st">"data/IowaProjections.csv"</span>, </span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">energy.source =</span> <span class="dv">4</span>, <span class="at">nyears =</span> <span class="dv">2</span>, </span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">iseed =</span> <span class="dv">739415</span>, <span class="at">nreps =</span> <span class="dv">10000</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Warning: Deterministic solution for year  1  is outside of its respective confidence interval.Warning: Deterministic solution for year  2  is outside of its respective confidence interval.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plot baseline</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>years <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1990</span>,<span class="dv">1995</span>,<span class="dv">2000</span>,<span class="dv">2005</span>,<span class="dv">2010</span>,<span class="dv">2015</span>,<span class="dv">2020</span>, <span class="dv">2023</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="at">x =</span> years, <span class="at">y =</span> historical.emissions[,<span class="dv">1</span>], <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">"purple4"</span>,</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">1985</span>, <span class="dv">2055</span>), <span class="at">xlab =</span> <span class="st">"Year"</span>,</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">75000</span>), <span class="at">ylab =</span> <span class="st">"GHG Emissions (TMT CO2e)"</span>,</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">"GHG Emissions from Electricity Generation </span><span class="sc">\n</span><span class="st"> in Iowa (TMT CO2e)"</span>)</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="co"># uncertainty</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(<span class="at">x =</span> years, <span class="at">y =</span> historical.emissions[,<span class="dv">2</span>], <span class="at">lty =</span> <span class="dv">2</span>, <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">"purple4"</span>)</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(<span class="at">x =</span> years, <span class="at">y =</span> historical.emissions[,<span class="dv">3</span>], <span class="at">lty =</span> <span class="dv">2</span>, <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">"purple4"</span>)</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="co"># compare to BAU</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>years.projected <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2023</span>, <span class="dv">2030</span>, <span class="dv">2050</span>)</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(<span class="at">x =</span> years.projected, <span class="at">y =</span> <span class="fu">c</span>(historical.emissions[<span class="dv">8</span>,<span class="dv">1</span>], projected.emissions[<span class="dv">1</span>,<span class="dv">1</span>], </span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>                                 projected.emissions[<span class="dv">2</span>,<span class="dv">1</span>]), <span class="at">lty =</span> <span class="dv">1</span>, <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">"purple2"</span>)</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a><span class="co"># uncertainty</span></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(<span class="at">x =</span> years.projected, <span class="at">y =</span> <span class="fu">c</span>(historical.emissions[<span class="dv">8</span>,<span class="dv">2</span>], projected.emissions[<span class="dv">1</span>,<span class="dv">2</span>], </span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>                                 projected.emissions[<span class="dv">2</span>,<span class="dv">2</span>]), <span class="at">lty =</span> <span class="dv">2</span>, <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">"purple2"</span>)</span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(<span class="at">x =</span> years.projected, <span class="at">y =</span> <span class="fu">c</span>(historical.emissions[<span class="dv">8</span>,<span class="dv">3</span>], projected.emissions[<span class="dv">1</span>,<span class="dv">3</span>], </span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>                                 projected.emissions[<span class="dv">2</span>,<span class="dv">3</span>]), <span class="at">lty =</span> <span class="dv">2</span>, <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">"purple2"</span>)</span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a><span class="co"># legend</span></span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(<span class="st">"topright"</span>, <span class="fu">c</span>(<span class="st">"Historical"</span>, <span class="st">"BAU"</span>),</span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>       <span class="at">lwd =</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">2</span>), <span class="at">lty =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>),</span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>       <span class="at">col =</span> <span class="fu">c</span>(<span class="st">"purple4"</span>, <span class="st">"purple2"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="project2_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Plot mitigation.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># projected emissions with mitigation scenarios (mitigation added to years 3-6)</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>mitigation.emissions <span class="ot">&lt;-</span> <span class="fu">IowaEmissions</span>(<span class="at">input.filename =</span> <span class="st">"data/IowaProjections.csv"</span>, <span class="at">energy.source =</span> <span class="dv">4</span>, </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">nyears =</span> <span class="dv">6</span>, <span class="at">iseed =</span> <span class="dv">739415</span>, <span class="at">nreps =</span> <span class="dv">10000</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Warning: Deterministic solution for year  1  is outside of its respective confidence interval.Warning: Deterministic solution for year  2  is outside of its respective confidence interval.Warning: Deterministic solution for year  3  is outside of its respective confidence interval.Warning: Deterministic solution for year  4  is outside of its respective confidence interval.Warning: Deterministic solution for year  5  is outside of its respective confidence interval.Warning: Deterministic solution for year  6  is outside of its respective confidence interval.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plot baseline</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>years <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1990</span>,<span class="dv">1995</span>,<span class="dv">2000</span>,<span class="dv">2005</span>,<span class="dv">2010</span>,<span class="dv">2015</span>,<span class="dv">2020</span>, <span class="dv">2023</span>)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="at">x =</span> years, <span class="at">y =</span> historical.emissions[,<span class="dv">1</span>], <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">"purple4"</span>,</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">1985</span>, <span class="dv">2055</span>), <span class="at">xlab =</span> <span class="st">"Year"</span>,</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">75000</span>), <span class="at">ylab =</span> <span class="st">"GHG Emissions (TMT CO2e)"</span>,</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">main =</span> <span class="st">"GHG Emissions from Electricity Generation </span><span class="sc">\n</span><span class="st"> in Iowa (TMT CO2e)"</span>)</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="co"># uncertainty</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(<span class="at">x =</span> years, <span class="at">y =</span> historical.emissions[,<span class="dv">2</span>], <span class="at">lty =</span> <span class="dv">2</span>, <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">"purple4"</span>)</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(<span class="at">x =</span> years, <span class="at">y =</span> historical.emissions[,<span class="dv">3</span>], <span class="at">lty =</span> <span class="dv">2</span>, <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">"purple4"</span>)</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a><span class="co"># compare to BAU</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>years.projected <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2023</span>, <span class="dv">2030</span>, <span class="dv">2050</span>)</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(<span class="at">x =</span> years.projected, <span class="at">y =</span> <span class="fu">c</span>(historical.emissions[<span class="dv">8</span>,<span class="dv">1</span>], mitigation.emissions[<span class="dv">1</span>,<span class="dv">1</span>], mitigation.emissions[<span class="dv">2</span>,<span class="dv">1</span>]), <span class="at">lty =</span> <span class="dv">1</span>, <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">"purple2"</span>)</span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a><span class="co"># uncertainty</span></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(<span class="at">x =</span> years.projected, <span class="at">y =</span> <span class="fu">c</span>(historical.emissions[<span class="dv">8</span>,<span class="dv">2</span>], projected.emissions[<span class="dv">1</span>,<span class="dv">2</span>], projected.emissions[<span class="dv">2</span>,<span class="dv">2</span>]), <span class="at">lty =</span> <span class="dv">2</span>, <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">"purple2"</span>)</span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(<span class="at">x =</span> years.projected, <span class="at">y =</span> <span class="fu">c</span>(historical.emissions[<span class="dv">8</span>,<span class="dv">3</span>], projected.emissions[<span class="dv">1</span>,<span class="dv">3</span>], projected.emissions[<span class="dv">2</span>,<span class="dv">3</span>]), <span class="at">lty =</span> <span class="dv">2</span>, <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">"purple2"</span>)</span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a><span class="co"># M1</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(<span class="at">x =</span> years.projected, <span class="at">y =</span> <span class="fu">c</span>(historical.emissions[<span class="dv">8</span>,<span class="dv">1</span>], mitigation.emissions[<span class="dv">3</span>,<span class="dv">1</span>], mitigation.emissions[<span class="dv">4</span>,<span class="dv">1</span>]), <span class="at">lty =</span> <span class="dv">1</span>, <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">"darkblue"</span>)</span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a><span class="co"># uncertainty</span></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(<span class="at">x =</span> years.projected, <span class="at">y =</span> <span class="fu">c</span>(historical.emissions[<span class="dv">8</span>,<span class="dv">2</span>], mitigation.emissions[<span class="dv">3</span>,<span class="dv">2</span>], mitigation.emissions[<span class="dv">4</span>,<span class="dv">2</span>]), <span class="at">lty =</span> <span class="dv">2</span>, <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">"darkblue"</span>)</span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(<span class="at">x =</span> years.projected, <span class="at">y =</span> <span class="fu">c</span>(historical.emissions[<span class="dv">8</span>,<span class="dv">3</span>], mitigation.emissions[<span class="dv">3</span>,<span class="dv">3</span>], mitigation.emissions[<span class="dv">4</span>,<span class="dv">3</span>]), <span class="at">lty =</span> <span class="dv">2</span>, <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">"darkblue"</span>)</span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a><span class="co"># M2</span></span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(<span class="at">x =</span> years.projected, <span class="at">y =</span> <span class="fu">c</span>(historical.emissions[<span class="dv">8</span>,<span class="dv">1</span>], mitigation.emissions[<span class="dv">5</span>,<span class="dv">1</span>], mitigation.emissions[<span class="dv">6</span>,<span class="dv">1</span>]), <span class="at">lty =</span> <span class="dv">1</span>, <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">"violet"</span>)</span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a><span class="co"># uncertainty</span></span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(<span class="at">x =</span> years.projected, <span class="at">y =</span> <span class="fu">c</span>(historical.emissions[<span class="dv">8</span>,<span class="dv">2</span>], mitigation.emissions[<span class="dv">5</span>,<span class="dv">2</span>], mitigation.emissions[<span class="dv">6</span>,<span class="dv">2</span>]), <span class="at">lty =</span> <span class="dv">2</span>, <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">"violet"</span>)</span>
<span id="cb10-32"><a href="#cb10-32" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(<span class="at">x =</span> years.projected, <span class="at">y =</span> <span class="fu">c</span>(historical.emissions[<span class="dv">8</span>,<span class="dv">3</span>], mitigation.emissions[<span class="dv">5</span>,<span class="dv">3</span>], mitigation.emissions[<span class="dv">6</span>,<span class="dv">3</span>]), <span class="at">lty =</span> <span class="dv">2</span>, <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">"violet"</span>)</span>
<span id="cb10-33"><a href="#cb10-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-34"><a href="#cb10-34" aria-hidden="true" tabindex="-1"></a><span class="co"># legend</span></span>
<span id="cb10-35"><a href="#cb10-35" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(<span class="st">"topright"</span>, <span class="fu">c</span>(<span class="st">"Historical"</span>, <span class="st">"BAU"</span>, <span class="st">"M1"</span>, <span class="st">"M2"</span>),</span>
<span id="cb10-36"><a href="#cb10-36" aria-hidden="true" tabindex="-1"></a>       <span class="at">lwd =</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">2</span>), <span class="at">lty =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>),</span>
<span id="cb10-37"><a href="#cb10-37" aria-hidden="true" tabindex="-1"></a>       <span class="at">col =</span> <span class="fu">c</span>(<span class="st">"purple4"</span>, <span class="st">"purple2"</span>, <span class="st">"darkblue"</span>, <span class="st">"violet"</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="project2_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Given the current electricity production trends in the state of Iowa, a historical scenario mirrors the diversifying portfolio of energy sources between 1990 and 2023. Looking towards the future, a business-as-usual (BAU) scenario is drafted based on the existing infrastructure for electricity production&nbsp;utilizing&nbsp;mostly coal, natural gas, and wind. The first mitigation scenario (M1) examines the increasing investment in natural gas electricity production seen in Figure 1&nbsp;with a&nbsp;45%&nbsp;amplification of&nbsp;this energy source&nbsp;by 2030 and&nbsp;another 40%&nbsp;increase by 2050.&nbsp;A&nbsp;statewide initiative&nbsp;has&nbsp;already&nbsp;been set&nbsp;in motion with Iowa’s largest energy suppliers, MidAmerican Energy and Alliant Energy, committing to the construction of a natural gas power plant in Adair County (Eller 2015)&nbsp;so&nbsp;M1 is&nbsp;comparable&nbsp;to&nbsp;the state’s&nbsp;current&nbsp;activities.&nbsp;The second mitigation scenario (M2) predicts how&nbsp;Iowa’s&nbsp;energy portfolio and emissions would be&nbsp;impacted&nbsp;by a comprehensive transition to wind-based electricity production. Chinmoy and their colleagues (2019) studied the social and economic benefit of a scenario like M2, highlighting the enhanced quality of living for residents and improved reliability of wind power.&nbsp;Coal&nbsp;power plants would be&nbsp;eliminated&nbsp;from the energy portfolio&nbsp;with&nbsp;production&nbsp;goals&nbsp;reallocated to wind&nbsp;turbines.&nbsp;BAU, M1, and M2 would all project emissions through 2050&nbsp;for all Iowans as the state energy goals previously&nbsp;identified&nbsp;in the study.&nbsp;</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>